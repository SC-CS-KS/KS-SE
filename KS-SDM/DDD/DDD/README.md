# DDD

### 领域事件(Domain Event)
```md
Domain Event是由一个特定领域触因为一个用户Command触发的发生在过去的行为产生的事件，而这个事件是系统中其它部分感兴趣的。
```
* 为什么Domain Event如此重要？
```md
因为在现在的分布式环境下，没有一个业务系统是割裂的，而Messaging绝对是系统之间耦合度最低，最健壮，最容易扩展的一种通信机制。
因此理论上它是分布式系统的必选项。
```
### 聚合根(Aggregate)
```md
是一种更大范围的封装，把一组有相同生命周期、在业务上不可分隔的实体和值对象放在一起考虑，
只有根实体可以对外暴露引用，也是一种内聚性的表现。
```
```md
看银行的例子，Account（账号）是CustomerInfo（客户信息）Entity和Address（值对象）的聚合根，
Transaction（交易）是流水（Journal）的聚合根，因为流水是因为交易才产生的，具有相同的生命周期。
```
```md
最后提醒一下，聚合根是一个逻辑概念，主观性很强，所以在建模过程中很容易产生分歧，因此在日常工作中千万不要教条，
把握住一条主要原则，我们的最终目的是为了业务语义显现化，如果因为聚合根把模型弄的晦涩难懂那就得不偿失了
```
### 领域服务(Domain Service)
```md
有些领域中的动作，它们是一些动词，看上去却不属于任何对象。
它们代表了领域中的一个重要的行为，所以不能忽略它们或者简单地把它们合并到某个实体或者值对象中。
当这样的行为从领域中被识别出来时，最佳实践是将它声明成一个服务。
```
```md
例如开篇转账的例子，转账（transfer）这个行为是一个非常重要的领域概念，
但是它是发生在两个账号之间的，归属于账号Entity并不合适，因为一个账号Entity没有必要去关联他需要转账的账号Entity，
这种情况下，使用MoneyTransferDomainService就比较合适了。
```
* 识别领域服务，主要看它是否满足以下三个特征：
```md
1. 服务执行的操作代表了一个领域概念，这个领域概念无法自然地隶属于一个实体或者值对象。
2. 被执行的操作涉及到领域中的其他的对象。
3. 操作是无状态的。
```
### 界限上下文(Bounded Context)
```md
Eric Evans 用细胞来形容限界上下文，因为细胞之所以能够存在，
是因为细胞限定了什么在细胞内，什么在细胞外，并且确定了什么物质可以通过细胞膜。
这里的细胞代表了上下文，而细胞膜带包了包裹上下文的边界。
```
```md
分析限界上下文的本质，就是对边界的控制。
```
```md
领域逻辑层面：确定了领域模型的业务边界
团队合作层面：确定了开发团队的工作边界
技术实现层面：确定了系统架构的应用边界
```
```md
康为定律认为：任何组织在设计一套系统时，所交付的设计方案在结构上都与该组织的沟通结构保持一致。
界限上下文是分而治之架构原则的体现。
```
### 上下文映射
```md
领域驱动设计通过上下文映射来表达限界上下文之间的协作关系。
两个限界上下文之间的关系是有方向的。
```
```md
上下文映射模式分为两大类：团队协作模式和通信集成模式。
前者对应的是团队合作的工作边界，后者对应技术实现的应用边界。
```
### 模型重构

### 业务可视化和可配置化
